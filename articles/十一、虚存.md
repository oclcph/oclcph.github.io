---
title: 虚存
abstract: 计组第十一章笔记
category: 计算机组成原理
---

# 十一、虚存

虚拟存储器：请求分页、虚拟地址

主存=用户区+系统区（操作系统）

**分区方式**

1. 简单固定分区，将用户区分为长度不等的定长分区
2. 可变长分区：按照任务需要的内存大小进行分配

**分页方式**：把主存分成定长的存储块，为**页框**；每个任务被划分为定长的程序块，为**页**，把页装入页框（页框未必连续）

## 分页式虚存

**基本原理：**主存划分为多个页框，逻辑地址划分为逻辑上的页。系统中建立一个页表**(存储在主存中)**来建立页和页框之间的映射关系。页框可以不连续。有**位示图**记录页框状态和当前空闲页框数。

**算法：**

1. 检查空闲页框数能否满足进程要求，不能则令进程等待，能则查找位示图
2. 找出位示图中为“0”的位，置占用标志（“1”），从空闲页框数中减去本次占用块数
3. 按所找到的位的位置计算对应页框号，填入页表
4. 进程执行结束时根据归还的页框号计算对应位在位示图中的位置，占有标志置“0”，空闲页框数加上归还块数

> 访问两次主存：访问页表、访问指令或存取数据

**快表：**存储在联想存储器中的页表部分，存取速度远高于主存。先查快表，再查主存，提高效率。

**地址转换：**虚拟地址=虚拟页号+页内偏移

![image-20240512112221855](C:\Users\ocl\AppData\Roaming\Typora\typora-user-images\image-20240512112221855.png)

**虚拟存储管理：**装入进程时把它的全部页面装入虚拟存储器，执行时先将部分页面装入实际主存，根据执行行为动态调用不在主存中的页面，同时进行必要的页面调出。

![image-20240512112542973](C:\Users\ocl\AppData\Roaming\Typora\typora-user-images\image-20240512112542973.png)

## 分段式虚存

将程序分成长度不同的段后加载到主存

**虚拟地址=段号+段内偏移**

## 段页式虚存

将程序和数据分段，再在段中分页，每个分段都有一个页表

虚拟地址=段号+页号+页内偏移量
